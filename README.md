# Тестовое задание на стежировку в ВК.
OpenApi спецификация: https://app.swaggerhub.com/apis/andrey2kulagin/djangoFriends/1.0.0
Сервис реализовывает весь функционал, описанный в задании, подробнее о функционале можно почитать в спецификации.

Сервис должен предоставлять возможности(Задание):
- зарегистрировать нового пользователя
- отправить одному пользователю заявку в друзья другому
- принять/отклонить пользователю заявку в друзья от другого пользователя
- посмотреть пользователю список своих исходящих и входящих заявок в друзья
- посмотреть пользователю список своих друзей
- получить пользователю статус дружбы с каким-то другим пользователем (нет ничего / есть исходящая заявка / есть входящая заявка / уже друзья)
- удалить пользователю другого пользователя из своих друзей
- если пользователь1 отправляет заявку в друзья пользователю2, а пользователь2 отправляет заявку пользователю1, то они автоматом становятся друзьями, их заявки автоматом принимаются

## Описание технологий:
 Сервис написан на django с использованием django rest framework и rest_framework_simplejwt(использовалось для авторизации). В качестве БД испольщовалась SQLite, все запросы выполнялись с помощью Django-orm. Весь код покрыт тестами, тесты лежат в папке приложения(api) в папке tests(api/tests) Полёт мысли можно посмотреть по истории коммитов
## Описание запуска(подразумевается, что поставлен python и pip и git)
1. Склонировать проект перейти в папку, которую склонировали, создать и запустить виртуальное окружение
Клонирование проекта:
  ```
  git clone  https://github.com/Andrey2kulagin/django_friend_service.git
  cd django_friend_service
  ```
2. Настройка виртуального окружения для windows
  ```
  python -m venv venv
  venv\Scripts\activate.bat
  ```
3. Настройка виртуального окружения для Unix(macOS, Linux)
 ```
 python -m venv venv
 source venv/bin/activate
 ```
 4. Установка необходимых библиотек
 ```
 pip list -r requirements.txt
 ```
 5. Проведение миграций(для unix-систем python3 вместо python)
 ```
 python manage.py migrate
 ```
 6. запуск тестов и просмотр покрытия(необязательно)
  ```
  coverage run manage.py test api/tests
  coverage report
  ```
  7. Запуск отладочного сервера
  ```
  python manage.py runserver
  ```
  8. Тестирование 
  * По умолчанию тестовый сервер должен быть подняться на локальном хосте и 8000-м порту(http://127.0.0.1:8000)
  * Тестирование можно проводить из браузера или из postman, для этого надо ставить http://127.0.0.1:8000/api/v1/ + ендпоинт, которые описаны в swagger
  * При запуске из postman надо так же указать нужные параметры и метод(описано в swagger)
  * Для авторизации используются JWT-токены(эндпоинты для их получения указаны в swagger). 
  * Access-токен действует 1 час для авторизации в заголовок хапроса надо вставить параметр Authorization со значением "Bearer"+пробел + access-token 
  * Пример значения Authorization Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjgzNTY3MDcxLCJpYXQiOjE2ODM1NjM0NzEsImp0aSI6ImU2MGJlNjU2NGE2YzQwYThiYmNkMzlkZWZkYTE2ZjM5IiwidXNlcl9pZCI6MX0.yCA-50wloVhRYRrc5phrr-jgbGpMDNKioi_-IornoXw
  
